<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>joe di castro</title><link href="http://joedicastro.com" rel="alternate"></link><link href="http://joedicastro.com/feeds/tags/usabilidad.atom.xml" rel="self"></link><id>http://joedicastro.com</id><updated>2012-06-07T22:40:00+02:00</updated><entry><title>Productividad &amp; Linux: Aplicaciones</title><link href="http://joedicastro.com/productividad-linux-aplicaciones.html" rel="alternate"></link><updated>2012-06-07T22:40:00+02:00</updated><author><name>joe di castro</name></author><id>http://joedicastro.com/productividad-linux-aplicaciones.html</id><summary type="html">&lt;p&gt;En la anterior serie de artículos sobre &lt;a href="http://joedicastro.com/productividad-en-el-escritorio-linux-introduccion.html"&gt;Productividad en el escritorio
Linux&lt;/a&gt;, hacia referencia a los lanzadores de aplicaciones y a los gestores
de ventanas de mosaico como elementos diferenciadores a la hora de ser más
productivos. Aunque la productividad en el escritorio es fundamental para
trabajar de forma más eficiente, son las aplicaciones que empleamos, las que en
último lugar, determinaran la realidad de nuestro día a día frente a la
pantalla.&lt;/p&gt;
&lt;p&gt;Gran parte de las aplicaciones para Linux (las más conocidas y extendidas) son
realmente una adaptación de los conceptos de los sistemas operativos más
difundidos: Windows &amp;amp; Mac OS. Esto es, aplicaciones muy pesadas, repletas de
opciones y funciones de las que se aprovechan en realidad muy pocas.  Además
están por lo general fuertemente orientadas al empleo del ratón y muchas veces
con un interfaz gráfico muy agradable visualmente pero con un concepto de
usabilidad, en mi opinión, no siempre bien enfocado.&lt;/p&gt;
&lt;h2 id="la_usabilidad_mal_entendida_como_enemiga_de_la_productividad"&gt;La usabilidad mal entendida, como enemiga de la productividad&lt;/h2&gt;
&lt;p&gt;La &lt;a href="https://es.wikipedia.org/wiki/Usabilidad"&gt;usabilidad&lt;/a&gt;, ese concepto tan de moda últimamente, está desde mi
punto de vista, frecuentemente muy mal enfocado. Dejando a un lado lo que
teóricamente se pretende, en el 80% de las ocasiones esto se traduce en la
práctica en dos palabras en ingles: &lt;em&gt;For dummies&lt;/em&gt;  ("pá tontos", en castizo). Es
decir, que cualquiera pueda manejar la aplicación sin grandes dificultades y en
el menor tiempo posible. Reducir las barreras de entrada está muy bien, pero
desgraciadamente muchas veces esto es una estrategia a corto plazo que no
debería emplearse &lt;strong&gt;NUNCA de este modo&lt;/strong&gt; en aplicaciones profesionales.
Entiendo, y además apoyo, está estrategia en aplicaciones web y aplicaciones de
consumo, pero lo veo nocivo a la hora de aplicaciones destinadas a producir
datos y contenidos de forma masiva e intensiva. Y a mi modo de ver es un
problema serio en un gran número de escenarios.&lt;/p&gt;
&lt;h3 id="un_caso_real_de_usabilidad_enga+osa"&gt;Un caso real de usabilidad engañosa&lt;/h3&gt;
&lt;p&gt;No proporcionare datos reales por respeto a las partes implicadas, pero quiero
aportar aquí un ejemplo real que he podido vivir de cerca durante varios años,
de lo que la pretendida usabilidad, ni lo es, ni ayuda a sacar más partido de
las herramientas:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Escenario fallido&lt;/strong&gt; : un negocio que se dedica el 90% del tiempo a editar
grandes cantidades de texto. Se informatizan a mediados de los 80 y adoptan como
procesador de textos WordPerfect para consola. Después de varios años, están en
la versión de WordPerfect 5.1 para MSDOS con un 90% de los empleados (unos
diez), con un dominio asombroso de la aplicación, basando todo su trabajo en
atajos de teclado y una pantalla donde únicamente se visualiza el texto sobre el
que están trabajando. Productividad: realmente elevada.  Principios del siglo
XXI, un consultor informático embaucador (&lt;em&gt;aka&lt;/em&gt; comercial) los convence de que
el futuro es &lt;a href="https://es.wikipedia.org/wiki/Wysiwyg"&gt;WYSIWYG&lt;/a&gt; y que eso del terminal de texto es cosa del pasado.
Tras una primera migración a WordPerfect para Windows, la productividad baja de
forma significativa. La solución propuesta: Word, la productividad cae de forma
dramática. La excusa del "asesor": necesidad de adaptación al nuevo concepto.
Dos años después, la productividad sigue sin incrementarse, el trabajo se
acumula y se contratan a dos personas más para refuerzo. El personal ya se ha
adaptado y están tan hipnotizados por el ratón, los iconos y los "regalitos" que
su software les proporciona en cada nueva versión, que se oponen radicalmente a
volver al "pasado". En realidad, nadie desde dentro se cuestionaba que el
problema real era que habían dejado de centrarse en el contenido, para centrarse
en el continente. Lo más irónico: lo que realmente hacían era crear e imprimir
documentos, impresos en impresoras matriciales que seguían imprimiendo con la
misma calidad y la misma fuente Courier 11 sobre el mismo tipo de documentos
oficiales.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Escenario exitoso&lt;/strong&gt; : Paralelamente, en un área de negocio distinta, pero
estrechamente relacionada con la anterior, una empresa que ha trabajado siempre
en entorno de terminal contra un &lt;a href="https://es.wikipedia.org/wiki/As/400"&gt;AS/400,&lt;/a&gt; presentaba una mentalidad y un
resultado totalmente opuestos. Nunca se han dejado seducir por los cantos de
sirena del marketing y se han opuesto radicalmente a cualquier cambio de
sistema, simplemente han evolucionado el que ya tenían y conservando su
plantilla prácticamente intacta durante el mismo periodo. El resultado: la
productividad se ha mantenido constante a lo largo de los años y han podido
asumir importantes picos de carga de trabajo sin demasiadas dificultades. Y un
efecto secundario de esta toma de decisiones: el haberse mantenido dentro de un
sistema maduro y estable les ha librado de un mantenimiento casi nulo en el área
de software, limitándose el mismo al área de hardware (lo habitual). Como podéis
imaginar, en un sistema basado en plataforma Windows y actualizaciones sucesivas
de SO y aplicaciones, el mantenimiento del área de software les ha supuesto una
importante carga económica al otro negocio.&lt;/p&gt;
&lt;p&gt;Que cada uno extraiga sus propias conclusiones. La mía: que la carrera hacia
adelante de fabricantes de sistemas operativos y aplicaciones (cuyo único
recurso para seguir vendiendo ha sido con frecuencia un simple
lavado de cara) ha supuesto, en muchos aspectos, un paso atrás en varias áreas de
la informática.&lt;/p&gt;
&lt;h2 id="la_usabilidad_bien_entendida"&gt;La usabilidad bien entendida&lt;/h2&gt;
&lt;p&gt;No quiero decir con lo anterior, que las aplicaciones gráficas sean el problema
ni mucho menos. De hecho, hay aplicaciones gráficas que son una maravilla de la
usabilidad. Por ejemplo, Autocad, que te permite un control casi absoluto como
usuario avanzado (con los comandos y &lt;a href="https://es.wikipedia.org/wiki/Autolisp"&gt;AutoLISP&lt;/a&gt;) y que al mismo tiempo te
permite realizar gran parte del trabajo de manera muy intuitiva (siempre
teniendo en cuenta el contexto del usuario al que va dirigido) empleando la
interfaz gráfica. Lo que permite que sea muy usable sin detrimento de la
productividad. Lo que quiero decir, es que es necesario añadir el sentido común
como un criterio más, si no el primero, a la hora de implementar la usabilidad.&lt;/p&gt;
&lt;p&gt;Si consultamos la Wikipedia, encontramos dos definiciones de la ISO para el
concepto de &lt;a href="https://es.wikipedia.org/wiki/Usabilidad"&gt;usabilidad&lt;/a&gt; :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;La usabilidad se refiere a la capacidad de un software de ser comprendido,
aprendido, usado y ser atractivo para el usuario, en condiciones específicas de
uso&lt;/p&gt;
&lt;p&gt;Usabilidad es la eficacia, eficiencia y satisfacción con la que un producto
permite alcanzar objetivos específicos a usuarios específicos en un contexto de
uso específico&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Como decía anteriormente, la realidad dista mucho de la teoría. En la
práctica se ha adoptado con bastante fidelidad la primera definición, eso sí,
ignorando con bastante frecuencia la parte de "condiciones específicas" y la
segunda definición parece haber sido ampliamente ignorada.&lt;/p&gt;
&lt;p&gt;Si bien es cierto que la mayoría de las aplicaciones actuales pueden ser muy
potentes, lo que yo veo mirando al pasado, es que la gran mayoría de los
empleados que utilizaban una aplicación a diario eran usuarios avanzados y
cuando no expertos. Hoy en día, y ciñéndonos al ámbito profesional, a algunos
les cambias el icono de la misma, y no saben iniciarla. Y no es culpa de ellos,
las aplicaciones se diseñan para que las puedan usar hasta los más reacios a la
tecnología (siempre en su contexto), pero una vez que necesitas realizar algo
complejo, existe un salto conceptual que la mayoría de los usuarios, ni se
atreven a dar, ni quieren darlo.&lt;/p&gt;
&lt;p&gt;Es realmente complejo, muy complejo, conseguir una interfaz de usuario que sea
realmente amigable e intuitiva y que al mismo tiempo consiga satisfacer las
necesidades reales tanto del usuario profesional, como del usuario ocasional. El
problema de base está en intentar crear herramientas todoterreno. Ni maldita
falta que le hace un Word actual a un usuario domestico y que demonios hace un
escritor profesional empleándolo en vez de algo como Latex + editor de texto.
Ni un usuario domestico necesita de herramientas para correspondencia, programar
macros, etc, ni un escritor necesita preocuparse del formato del texto. Y sin
embargo es empleado hasta por editores que deberían estar empleando
herramientas de autoedición.&lt;/p&gt;
&lt;p&gt;Por ejemplo, una aplicación que es un claro ejemplo de buena usabilidad y que
está teniendo una buena acogida últimamente, es &lt;a href="http://www.sublimetext.com/"&gt;Sublime Text&lt;/a&gt;. Es bonita,
es potente, es amigable y es francamente muy, muy usable. Realmente lo que han
hecho ha sido recoger el testigo que dejo &lt;a href="http://macromates.com/"&gt;TextMate&lt;/a&gt;, que fueron los
primeros en darse cuenta de algo muy sencillo. Esto es, los editores de texto y
los IDEs para programadores son una de las aplicaciones en las que nunca llueve
a gusto de todos, surgen continuamente nuevas alternativas, pero no se acaba por
imponer ninguna. Por que en realidad, si nos fijamos en los programadores más
experimentados, dos de los editores más utilizados y defendidos a muerte, son
&lt;a href="https://es.wikipedia.org/wiki/Vim"&gt;Vim&lt;/a&gt; y &lt;a href="https://es.wikipedia.org/wiki/Emacs"&gt;Emacs&lt;/a&gt;, ambos basados en conceptos de hace casi cuatro
décadas. Es que la usabilidad ya estaba inventada hace mucho tiempo, y no tiene
nada que ver ni con gráficos bonitos, ni con tratar a los usuarios como
imbéciles. La usabilidad, señores, está en la adaptación del interfaz del
ordenador de la manera más optima posible al interfaz que la naturaleza nos dio,
nuestras manos. Y desde luego, jamás un ratón, con los botones que quieras
ponerle, sera más eficaz que un teclado (usado con los diez deditos), al igual
que no lo es más que un bolígrafo o una tableta gráfica con lápiz. Que para eso
tenemos los dedos y no muñones. Si vamos a comprar un libro en Internet, el
ratón es nuestro gran aliado para hacerlo de forma intuitiva sin conocimientos
previos, pero si me vas a obligar a introducir entradas de almacén 40 horas a la
semana con la misma aplicación, por favor, no me condenes a usar el ratón cada
dos pasos. Sentido común!&lt;/p&gt;
&lt;h2 id="las_aplicaciones_amigas_de_la_productividad"&gt;Las aplicaciones amigas de la productividad&lt;/h2&gt;
&lt;p&gt;Este entrada pretende ser la introducción y el indice de una nueva serie de
artículos dedicada a esas aplicaciones para Linux que para mi marcan la
diferencia entre &lt;em&gt;hacer el trabajo&lt;/em&gt; y &lt;em&gt;marear la perdiz&lt;/em&gt;. Estas aplicaciones
comparten en general tres puntos en común:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Son muy eficientes y ayudan a incrementar nuestra productividad.&lt;/li&gt;
&lt;li&gt;Realizan a una sola tarea y lo hacen bien o muy bien.&lt;/li&gt;
&lt;li&gt;No están muy extendidas.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Iré actualizando la entrada a medida que vaya creando los artículos para cada
aplicación.&lt;/p&gt;
&lt;h3 id="aplicaciones"&gt;Aplicaciones&lt;/h3&gt;
&lt;p&gt;Estas son algunas de las aplicaciones que yo empleo a menudo y que al igual que
a mí, pueden servirte para incrementar de forma notable tu productividad.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://joedicastro.com/productividad-linux-pentadactyl.html"&gt;Pentadactyl&lt;/a&gt;, complemento para Firefox para controlar el navegador
  completamente desde el teclado, permite navegar entre las páginas a velocidad
  de vértigo. Además es muy potente y posee muchísimas opciones y posibilidades.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://joedicastro.com/productividad-linux-newsbeuter.html"&gt;Newsbeuter&lt;/a&gt;, aplicación para leer subscripciones RSS y Atom. Funciona
  en modo texto, con una interfaz tipo ncurses y completamente controlable desde
  el teclado. Es una aplicación rapidisima y con un consumo muy escaso de
  recursos.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://joedicastro.com/productividad-linux-turses.html"&gt;Turses&lt;/a&gt;, cliente twitter para la consola con interfaz ncurses.
  Controlable desde el teclado con atajos basados en Vim. Muy personalizable y
  con un funcionamiento muy versátil y ágil.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://joedicastro.com/productividad-linux-tmux.html"&gt;tmux&lt;/a&gt;, es un multiplexor de terminales. Permite agrupar varios
  terminales en una sola ventana de forma muy eficiente. La herramienta ideal
  para los amantes de la consola, desarrolladores y administradores de sistemas.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://joedicastro.com/productividad-linux-zathura.html"&gt;zathura&lt;/a&gt;, es un visor de documentos minimalista y controlable desde
  el teclado. Soporta documentos en formato PDF, DJVU, PostScript y Comic Book.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://joedicastro.com/productividad-linux-ranger.html"&gt;Ranger&lt;/a&gt;, es un administrador de archivos en modo texto y
  revolucionario en su interfaz y manejo. Muy potente y personalizable. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://joedicastro.com/productividad-linux-ncdu.html"&gt;Ncdu&lt;/a&gt;, una herramienta con interfaz ncurses que nos permite conocer el
  espacio consumido en nuestro disco duro y navegar por los distintos
  directorios. La mejor herramienta del estilo que existe para la consola.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary><category term="linux"></category><category term="productividad"></category><category term="usabilidad"></category></entry><entry><title>Logger, informes legibles para tus scripts Python</title><link href="http://joedicastro.com/logger-informes-legibles-para-tus-scripts-python.html" rel="alternate"></link><updated>2011-05-07T23:02:00+02:00</updated><author><name>joe di castro</name></author><id>http://joedicastro.com/logger-informes-legibles-para-tus-scripts-python.html</id><summary type="html">&lt;p&gt;Normalmente los scripts que se crean para ser ejecutados periódicamente, como 
los de administración de sistemas, realizan tareas que generan cambios que 
queremos conocer. Esta información se suele guardar en logs o se envía por 
correo a una dirección de email. Hay muchas formas de generar estos logs, pero 
normalmente es una simple salida de texto plano en consola, que no suele tener 
una presentación muy "amigable" o legible. Cuando tienes una cantidad generosa 
de estos scripts, los recibes por correo electrónico y con una frecuencia diaria 
o mayor, lo que menos deseas es andar buscando la información entre lineas de 
texto plano. Lo que yo quiero es poder identificar la información rápidamente de 
un vistazo, además tenía una idea rondando por la cabeza, que seria aún más 
cómodo si todos emplearan un formato similar. Con estas premisas cree un módulo 
&lt;strong&gt;Python&lt;/strong&gt;, &lt;code&gt;logger.py&lt;/code&gt;, que empleo en muchos de mis scripts en Python y que me 
permite analizar adecuadamente la información que me interesa.&lt;/p&gt;
&lt;p&gt;Un ejemplo de informe generado por este modulo Python sería el siguiente (el 
mismo que se generaría si ejecutáramos el modulo como script):&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;SCRIPT =========================================================================
logger (ver. 0.3)
http://joedicastro.com

This is a test of class Logger
================================================================================

START TIME =====================================================================
                                                     Saturday 05/07/11, 21:51:27
================================================================================

BLOCK ==========================================================================
This
is
a
sample
of
Logger.block()
================================================================================

LIST ___________________________________________________________________________

This
is
a
sample
of
Logger.list()

This a sample of logger.free() text.

&amp;quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque sed
tortor eget justo vehicula consequat vel eu quam. Suspendisse non lectus eget
orci varius adipiscing.&amp;quot;

END TIME =======================================================================
                                                     Saturday 05/07/11, 21:51:27
================================================================================
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Este modulo contiene una clase, &lt;code&gt;Logger()&lt;/code&gt;, que dispone de una serie de métodos 
que nos permiten diversas tareas, supongamos que tenemos un objeto &lt;code&gt;log&lt;/code&gt; de la 
clase &lt;code&gt;Logger()&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.header(url, msg)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Nos crea una cabecera para el script que nos aporta cierta información que 
 nos sirve para  identificar el mismo y el contexto en el que se ejecuta. &lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;SCRIPT =========================================================================
nombre del script (versión)
http://miweb.com/script

mensaje que nos informa de la finalidad del mismo o de 
información dependiente del contexto. Totalmente 
personalizable.
================================================================================
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.time(title)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Nos permite registrar el tiempo de un evento. Normalmente lo empleo para 
   registrar el comienzo y el final de la ejecución del script. &lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;TITULO =========================================================================
                                                       Sábado 07/05/11, 22:18:27
================================================================================
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.block(title, content)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Crea un bloque de texto con titulo y enmarcado por líneas compuestas por el 
   carácter &lt;code&gt;=&lt;/code&gt;. Entre esas lineas y el contenido no hay ninguna linea en 
   blanco. Es útil para destacar cierto contenido del resto de forma muy 
   notable, suelo utilizarlo para ubicar el script en su contexto. &lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;TITULO =========================================================================
contenido
sigue el contenido
...
================================================================================
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.list(title, content)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Como su nombre bien indica, es una lista de líneas con un simple encabezado 
  que lo distinga del resto. Suelo emplearlo para volcar la información generada 
  por el script. Entre el encabezado y la primera línea de texto existe una 
  línea en blanco.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;TITULO __________________________________________________

Primera línea del contenido
Segunda línea del contenido
...
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.free(content)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Texto libre, párrafos que se mostrarán tal y como son, sin formato ni 
  cabecera alguna. Raramente lo empleo, pero es útil por ejemplo para 
  introducir comentarios, licencias, etc.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.send(subject, send_from='', dest_to='', mail_server='localhost',
             server_user='', server_pass='')&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;El meollo del script. Se emplea para mandar el resultado por 
   correo electrónico. Si solo especificamos el asunto, empleará nuestro 
   servidor de correo local para mandar el informe al buzón local del usuario 
   que programó/ejecuto el script. Pero se pueden especificar tanto el empleo 
   de un servidor de correo (SMTP) distinto como otro (o varios) 
   destinatario(s) en particular. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.write(append=False)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Escribe el resultado del log en un fichero de texto. El nombre de este 
   fichero estará compuesto por el nombre del script sin extensión, más la 
   extensión &lt;em&gt;.log&lt;/em&gt;. Si &lt;code&gt;append&lt;/code&gt; es &lt;code&gt;True&lt;/code&gt; entonces añadirá el resultado al 
   final de texto, si no, lo reescribirá en cada ejecución guardando 
   únicamente el último informe. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;log.get()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Nos devuelve el contenido del log. Es útil cuando estamos con tareas de 
  depurado, con un &lt;code&gt;print&lt;/code&gt; llamando a este método podemos volcar en la 
  consola la información registrada en el log.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;El código del script es el siguiente: &lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;span class="c"&gt;# -*- coding: utf8 -*-&lt;/span&gt;

&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;    logger.py: Create a log object to log script messages in a elegant way&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="c"&gt;#===============================================================================&lt;/span&gt;
&lt;span class="c"&gt;# This module create a log object to log script messages in a elegant way&lt;/span&gt;
&lt;span class="c"&gt;#===============================================================================&lt;/span&gt;

&lt;span class="c"&gt;#===============================================================================&lt;/span&gt;
&lt;span class="c"&gt;#    Copyright 2010 joe di castro &amp;lt;joe@joedicastro.com&amp;gt;&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;#    This program is free software: you can redistribute it and/or modify&lt;/span&gt;
&lt;span class="c"&gt;#    it under the terms of the GNU General Public License as published by&lt;/span&gt;
&lt;span class="c"&gt;#    the Free Software Foundation, either version 3 of the License, or&lt;/span&gt;
&lt;span class="c"&gt;#    (at your option) any later version.&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;#    This program is distributed in the hope that it will be useful,&lt;/span&gt;
&lt;span class="c"&gt;#    but WITHOUT ANY WARRANTY; without even the implied warranty of&lt;/span&gt;
&lt;span class="c"&gt;#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&lt;/span&gt;
&lt;span class="c"&gt;#    GNU General Public License for more details.&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;#    You should have received a copy of the GNU General Public License&lt;/span&gt;
&lt;span class="c"&gt;#    along with this program.  If not, see &amp;lt;http://www.gnu.org/licenses/&amp;gt;.&lt;/span&gt;
&lt;span class="c"&gt;#===============================================================================&lt;/span&gt;

&lt;span class="n"&gt;__author__&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;joe di castro &amp;lt;joe@joedicastro.com&amp;gt;&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;__license__&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;GNU General Public License version 3&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;__date__&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;10/09/2010&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;__version__&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;0.3&amp;quot;&lt;/span&gt;

&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;smtplib&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;socket&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;email.mime.text&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MIMEText&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;email.mime.multipart&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;MIMEMultipart&lt;/span&gt;
    &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;email.utils&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;COMMASPACE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;formatdate&lt;/span&gt;
&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;ImportError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="c"&gt;# Checks the installation of the necessary python modules &lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linesep&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;An error found importing one module:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exc_info&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;You need to install it&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Stopping...&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
    &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Logger&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

&lt;span class="sd"&gt;    Create a log object to log script messages.&lt;/span&gt;

&lt;span class="sd"&gt;    These messages can be sended via email or writed in a log file&lt;/span&gt;

&lt;span class="sd"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Create the object Logger itself and set various attributes.&lt;/span&gt;

&lt;span class="sd"&gt;        These attributes are about the python file wich invokes this module:&lt;/span&gt;

&lt;span class="sd"&gt;        __script_vers = The version of python file which invokes this module&lt;/span&gt;
&lt;span class="sd"&gt;        __script_name = The name of the python file which invokes this module&lt;/span&gt;
&lt;span class="sd"&gt;        filename = the log file&amp;#39;s name&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__main__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;__dict__&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;__dict&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__log&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;__version__&amp;#39;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;__dict&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__script_vers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;__dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;__version__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__script_vers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;Unknown&amp;#39;&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__script_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;__file__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;{0}.log&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__script_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__len__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__log&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__format__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tit&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cont&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;decor&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Format a block or a list of lines to enhance comprehension.&lt;/span&gt;

&lt;span class="sd"&gt;        (str) tit -- title for the block or list&lt;/span&gt;
&lt;span class="sd"&gt;        (str or iterable) cont -- line/s for the list/block content&lt;/span&gt;
&lt;span class="sd"&gt;        (&amp;#39;=&amp;#39; or &amp;#39;_&amp;#39;) decor - define if it&amp;#39;s list or block and decorate it&lt;/span&gt;

&lt;span class="sd"&gt;        make the looks of self.block() and self.list()&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;ending&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;=&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linesep&lt;/span&gt;&lt;span class="p"&gt;}[&lt;/span&gt;&lt;span class="n"&gt;decor&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;=&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;=&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}[&lt;/span&gt;&lt;span class="n"&gt;decor&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="n"&gt;begin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;tit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;decor&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;ending&lt;/span&gt;
        &lt;span class="n"&gt;cont&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;cont&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cont&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;cont&lt;/span&gt;
        &lt;span class="n"&gt;sep&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linesep&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__log&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;begin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cont&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;block&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;A block of text lines headed and followed by a line full of &amp;#39;=&amp;#39;.&lt;/span&gt;

&lt;span class="sd"&gt;        (str) title -- The title that start the first line of &amp;#39;=&amp;#39;&lt;/span&gt;
&lt;span class="sd"&gt;        (str or iterable) content -- The line/s between the &amp;#39;=&amp;#39; lines&lt;/span&gt;

&lt;span class="sd"&gt;        There&amp;#39;s not any empty line between the &amp;#39;=&amp;#39; lines and content, e.g.:&lt;/span&gt;

&lt;span class="sd"&gt;        TITLE ==================================================&lt;/span&gt;
&lt;span class="sd"&gt;        content&lt;/span&gt;
&lt;span class="sd"&gt;        ========================================================&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__format__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;=&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;A list of text lines headed by a line full of &amp;#39;_&amp;#39;.&lt;/span&gt;

&lt;span class="sd"&gt;        (str) title -- The title that start the line of &amp;#39;_&amp;#39;&lt;/span&gt;
&lt;span class="sd"&gt;        (str or iterable) content -- The line/s after the &amp;#39;_&amp;#39; line&lt;/span&gt;

&lt;span class="sd"&gt;        After the &amp;#39;_&amp;#39; line is a empty line between it and the content, e.g.:&lt;/span&gt;

&lt;span class="sd"&gt;        TITLE __________________________________________________&lt;/span&gt;

&lt;span class="sd"&gt;        content&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__format__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Free text unformatted.&lt;/span&gt;

&lt;span class="sd"&gt;        (str) content -- Text free formated&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__log&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;linesep&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;A self.block() formated line with current time and date.&lt;/span&gt;

&lt;span class="sd"&gt;        (str) title -- Title for self.block()&lt;/span&gt;

&lt;span class="sd"&gt;        Looks like this, the data and time are right-justified:&lt;/span&gt;

&lt;span class="sd"&gt;        TITLE ==================================================&lt;/span&gt;
&lt;span class="sd"&gt;                                       Friday 09/10/10, 20:01:39&lt;/span&gt;
&lt;span class="sd"&gt;        ========================================================&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;block&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;{0:&amp;gt;80}&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strftime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;%A &lt;/span&gt;&lt;span class="si"&gt;%x&lt;/span&gt;&lt;span class="s"&gt;, &lt;/span&gt;&lt;span class="si"&gt;%X&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;header&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;A self.block() formated header for the log info.&lt;/span&gt;

&lt;span class="sd"&gt;        (str) url -- The url of the script&lt;/span&gt;
&lt;span class="sd"&gt;        (str) msg -- Message to show into the header. To Provide any useful info&lt;/span&gt;

&lt;span class="sd"&gt;        It looks like this:&lt;/span&gt;

&lt;span class="sd"&gt;        SCRIPT =================================================&lt;/span&gt;
&lt;span class="sd"&gt;        script name and version&lt;/span&gt;
&lt;span class="sd"&gt;        url&lt;/span&gt;

&lt;span class="sd"&gt;        msg&lt;/span&gt;
&lt;span class="sd"&gt;        ========================================================&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;script&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;{0} (ver. {1})&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__script_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__script_vers&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;block&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Script&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Get the log content.&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__log&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;subject&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;send_from&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dest_to&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mail_server&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="n"&gt;server_user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;server_pass&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Send a email with the log.&lt;/span&gt;

&lt;span class="sd"&gt;        Arguments:&lt;/span&gt;
&lt;span class="sd"&gt;            (str) send_from -- a sender&amp;#39;s email address (default &amp;#39;&amp;#39;)&lt;/span&gt;
&lt;span class="sd"&gt;            (str or list) dest_to -- a list of receivers&amp;#39; email addresses (&amp;#39;&amp;#39;)&lt;/span&gt;
&lt;span class="sd"&gt;            (str) subject -- the mail&amp;#39;s subject&lt;/span&gt;
&lt;span class="sd"&gt;            (str) mail_server -- the smtp server (default &amp;#39;localhost&amp;#39;)&lt;/span&gt;
&lt;span class="sd"&gt;            (str) server_user -- the smtp server user (default &amp;#39;&amp;#39;)&lt;/span&gt;
&lt;span class="sd"&gt;            (str) server_pass --the smtp server password (default &amp;#39;&amp;#39;)&lt;/span&gt;

&lt;span class="sd"&gt;        If &amp;#39;send_from&amp;#39; or &amp;#39;dest_to&amp;#39; are empty or None, then script user&amp;#39;s&lt;/span&gt;
&lt;span class="sd"&gt;        mailbox is assumed instead. Useful for loggin scripts&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;local_email&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;@&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getenv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;LOGNAME&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gethostname&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;send_from&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;send_from&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;local_email&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;dest_to&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;dest_to&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;local_email&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

        &lt;span class="n"&gt;dest_to_addrs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;COMMASPACE&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dest_to&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;# receivers mails&lt;/span&gt;
        &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MIMEMultipart&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Subject&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;{0} - {1}&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subject&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                                &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strftime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;%A &lt;/span&gt;&lt;span class="si"&gt;%x&lt;/span&gt;&lt;span class="s"&gt;, &lt;/span&gt;&lt;span class="si"&gt;%X&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;From&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;send_from&lt;/span&gt;
        &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;To&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dest_to_addrs&lt;/span&gt;
        &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;formatdate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;localtime&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;preamble&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;You&amp;#39;ll not see this in a MIME-aware mail reader.&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;attach&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MIMEText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__log&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

        &lt;span class="c"&gt;# initialize the mail server&lt;/span&gt;
        &lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SMTP&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="c"&gt;# Connect to mail server&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mail_server&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gaierror&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;mail error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;Wrong server, are you sure is correct?&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;mail error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;Server unavailable or connection refused&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c"&gt;# Login in mail server&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;mail_server&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;login&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;server_user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;server_pass&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SMTPAuthenticationError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;mail error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;Authentication error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SMTPException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;mail error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;No suitable authentication method&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c"&gt;# Send mail&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendmail&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;send_from&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dest_to_addrs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_string&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SMTPRecipientsRefused&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;mail error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;All recipients were refused.&amp;#39;&lt;/span&gt;
                      &lt;span class="s"&gt;&amp;#39;Nobody got the mail.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SMTPSenderRefused&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;mail error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;The server didn’t accept the from_addr&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SMTPDataError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;mail error&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;An unexpected error code, Data refused&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c"&gt;# Disconnect from server&lt;/span&gt;
        &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Write the log to a file.&lt;/span&gt;

&lt;span class="sd"&gt;        The name of the file will be like this:&lt;/span&gt;

&lt;span class="sd"&gt;        script.log&lt;/span&gt;

&lt;span class="sd"&gt;        where &amp;#39;script&amp;#39; is the name of the script file without extension (.py)&lt;/span&gt;

&lt;span class="sd"&gt;        (boolean) append -- If true appends log to file, else writes a new one&lt;/span&gt;

&lt;span class="sd"&gt;        &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
        &lt;span class="n"&gt;mode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;ab&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;append&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;wb&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;log_file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;log_file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__log&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;Main section&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;http://joedicastro.com&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;This is a test of class Logger&amp;#39;&lt;/span&gt;

    &lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Start time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;block&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Block&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;This is a sample of Logger.block()&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;List&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;This is a sample of Logger.list()&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&amp;#39;This a sample of logger.free() text.&lt;/span&gt;

&lt;span class="s"&gt;&amp;quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque sed&lt;/span&gt;
&lt;span class="s"&gt;tortor eget justo vehicula consequat vel eu quam. Suspendisse non lectus eget&lt;/span&gt;
&lt;span class="s"&gt;orci varius adipiscing.&amp;quot;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;End time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;This is mail test&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;All of this had been recorded in {0}&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Para acceder a la versión más reciente del mismo, acudir a el repositorio
&lt;em&gt;Python Recipes&lt;/em&gt; en &lt;a href="http://github.com/joedicastro/python-recipes"&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ejemplos de utilización de este modulo pueden ser 
&lt;a href="http://joedicastro.com/sincronizar_una_carpeta_local_y_una_remota_a_traves_de_ftp_lftp_mirror"&gt;lftp-mirror&lt;/a&gt; (incluido dentro del mismo), &lt;a href="http://joedicastro.com/ted_talks_descargar_videos_y_subtitulos_de_las_charlas"&gt;TEDTalks&lt;/a&gt;, &lt;a href="http://joedicastro.com/generar_informes_de_cambios_en_paquetes_instalados_en_debian_y_ubuntu"&gt;dpkg_diff&lt;/a&gt; y &lt;a href="http://joedicastro.com/combatir_el_spam_en_drupal"&gt;ban_drupal_spammers&lt;/a&gt;&lt;/p&gt;</summary><category term="usabilidad"></category><category term="script"></category><category term="python"></category><category term="informes"></category><category term="logging"></category><category term="modulo"></category></entry></feed>