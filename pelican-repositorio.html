<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Pelican - Repositorio</title>
  <meta name="author" content="joe di castro" />
  <meta name="keywords" content="pelican, python, markdown, restructuredtext, blog, mercurial, hg">
  <link rel="author" href="./humans.txt" />
  <link href='http://fonts.googleapis.com/css?family=Vollkorn:400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
  <link href="./atom.xml" type="application/atom+xml" rel="alternate" title="joe di castro ATOM Feed" />
  <link href="./rss.xml" type="application/atom+xml" rel="alternate" title="joe di castro RSS Feed" />
  
  <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body id="index" class="home">

  <header id="banner" class="body">
    <h1><a href="."><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAxBAMAAADKNk2HAAAAAXNSR0IArs4c6QAAABhQTFRFvI0Ww5kxzaxW2Lp049Ki7ePG8+zX/f/8R8l4ugAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfbDAsTFi548ol9AAADmElEQVRIx62XTXOjOBCGJeHMuWWwueLZyXAV8aS4hpnscg07yXJdnCpz5kv6+9stk4CzMJusocoOBvTQ3Xr7lcLMcLQ3ch2b/3+w17MuAi6BxwuwWuC3pXmGzeWsBlz7t+AXs9qXeOo5ls7fywq8l/jYzBgVvpNV8PKF9Xp2fnRyFpHkY1YHry+dy7GanZOWn8WViWHMDCuY1UqxHbP0EJapxHSK89Mr0zFrHMvd5oMp1uJ4LAdW5gy3wH9nis1OSsmGozyx1NWQC6S/ru8Qz+ff9vv7+0f51/H49PT0ex9XsPqv0g/1/Vfy3rm+Mv7tW/8zW02OmI72bfLM9iITvyxXI8ykgh9R2m91396WL205GUDi11PxFsJkvtET/jVfLi3TyW6ErZF5K2dYaiSjcqzf7ly596d2y2vHJM4Mixqgdb8j5k/o39fdhMFrEXXEU7rHqOK7rVG+PlX4cP3lDYsauwPGfBNxcHqP5HuZP/dWEAjkHrhHZS1YiuZR8TIhp2IsPWdljv6Ocxr4GY+jlLJswcMsNOT9fdRyC1+1SyYkSVyZG6EGgHuy7M5Y4GJXQAh7RqUuPmEBPcT51ar3tjzz6FKNjXLncfLHADCLgvEDb8SYhZG6as1rrlY6xdnLbdKKlyjIh9Ba6y6/Q7PEsjaidjDFRnyWpWZylXkQj1hY2OtWVkJxJuUn84B9o3xTM6cVtiEbYd/n0/qiIa62GK6K8etvEWyAbcbr444e21YM5COsS1I0hqYxh8K3bk8fDbzscOqUYwJfhY2DNM3CgHN3NI8d4GMmSDvmIic3EJM3mWQty4B0hGB8KmJXOMd5wX56cCtzFWPAD9xU7HqkLx2sUXX4fIEcnHjridXqwBOvFba1qOAZV2HGeM18teMF2wtTbRvCu2OtRqLE0DueUF05tZptKQiVXzvWwytUFmzVDU8YqgLAU0LhnLgQeTuej1gZz+1qhkLBUVfPJxNv5AZLRhqzThXhieJhxTysiMzlD4cGbhrWb0JOrEbGJqMRbXoKp/e+I3YUfVsPYfSeLrWXqEFLRQiM6LEc9yPtAIbFqJXXU3bx8483F75Mrdu0bFcXbEpGLLtsq+0iLFrTWpkuwbJhFcIswbKYmTX2oyzC1DNbpQ+yLEZtzBKsxFum8sSiyo93JxewrE9BuAiLvHwBzVsW2vAigiBWEC4VlmEQ64XCQtYmWigszJFd8q/ZOesgvy6EMv8ALXTFAI7iFV4AAAAASUVORK5CYII=" alt="Sobre mí" title="Sobre mí" width="150" height="49" /> </a></h1>
      <nav>
      	<ul>
         
         <li class="active"><a href="./category/blog.html">blog</a></li>
         <li><a href="./archives.html">archivo</a></li>
         <li><a href="./tags.html">etiquetas</a></li>
         
         <li><a href="./pages/markdown.html">markdown</a></li>
         
         <li><a href="https://github.com/joedicastro/feedback/issues/new">feedback</a></li>
         <li><a href="./rss.xml">rss</a></li>
       </ul>
     </nav>
  </header><!-- /#banner -->        
<section id="content" class="body">    
<article>
  <header> 
  	<h1 class="entry-title">
      <a href="pelican-repositorio.html" rel="bookmark" title="Permalink a Pelican - Repositorio">Pelican - Repositorio</a>
  	</h1>
  	
  </header>
  <div class="entry-content">
    <abbr class="published" title="2011-07-05T23:02:00">
      Públicado el mar 05 julio 2011
    </abbr>
    <p>Como complemento a la <a href="http://joedicastro.com/tag/pelican.html">serie de artículos</a> que he publicado sobre <a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a>, 
el software que genera este blog, añado el repositorio, <a href="http://joedicastro.com/pelican-configuracion-y-personalizacion.html">como había prometido</a>, 
del contenido del mismo. El repositorio empleaba el sistema de control de
versiones <a href="http://mercurial.selenic.com/">Mercurial</a> y estába alojado en <a href="https://bitbucket.org/">Bitbucket</a>.</p>
<p>Las ventajas de disponer del contenido del blog en un repositorio son las de 
poder enmendar un error con suma facilidad y en muy poco tiempo, además de la de 
poder trabajar con distintas versiones del mismo (pruebas y producción). Además 
el repositorio en Bitbucket me proporcionaba una copia de seguridad adicional del 
sitio sin esfuerzo alguno. Y si alguien está interesado en crear su propio blog 
con Pelican y quiere saber como he realizado el mio, ahí tiene las claves. Salvo 
el propio Pelican (que no tendría mucho sentido) todo el material empleado para 
generarlo está en el. Y disponiendo del fichero <strong>fabric</strong>, se pueden descargar 
Pelican e instalar el entorno virtual en un minuto. </p>
<p>Para automatizar todas las tareas, incluso las más comunes del repositorio, he 
añadido al fichero fabric <em>fabfile.py</em> dos tareas más:</p>
<div class="codehilite"><pre><span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a commit to the local mercurial repository.&quot;&quot;&quot;</span>
    <span class="n">local</span><span class="p">(</span><span class="s">&quot;hg add&quot;</span><span class="p">)</span>
    <span class="n">local</span><span class="p">(</span><span class="s">&quot;hg commit -m &#39;{0}&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">push</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Make a push to the remote mercurial repository.&quot;&quot;&quot;</span>
    <span class="n">local</span><span class="p">(</span><span class="s">&quot;hg push ssh://hg@bitbucket.org/joedicastro/joedicastro.com&quot;</span><span class="p">)</span>
</pre></div>


<p>Con estas puedo hacer un <code>commit</code> y un <code>push</code> a Bitbucket en un solo paso, por 
ejemplo:</p>
<div class="codehilite"><pre><span class="go">fab commit:&quot;Añadido articulo: Pelican - Repositorio&quot; push</span>
</pre></div>


<p>También he cambiado la página que generaba los archivos del blog, ya que no me 
gustaba el formato anterior: una fecha, un articulo. He pasado de esto:</p>
<div class="codehilite"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;section id=&quot;content&quot; class=&quot;body&quot;&gt;</span>
<span class="x">&lt;h1&gt;Archivos de </span><span class="cp">{{</span> <span class="nv">SITENAME</span> <span class="cp">}}</span><span class="x">&lt;/h1&gt;</span>

<span class="x">&lt;dl&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">dates</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;dt&gt;</span><span class="cp">{{</span> <span class="nv">article.locale_date</span> <span class="cp">}}</span><span class="x">&lt;/dt&gt;</span>
<span class="x">    &lt;dd&gt;&lt;a href=&#39;</span><span class="cp">{{</span> <span class="nv">article.url</span> <span class="cp">}}</span><span class="x">&#39;&gt;</span><span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="x">&lt;/a&gt;&lt;/dd&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/dl&gt;</span>
<span class="x">&lt;/section&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>


<p>a esto:</p>
<div class="codehilite"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;section id=&quot;content&quot; class=&quot;body&quot;&gt;</span>
<span class="x">&lt;h1&gt;Archivos de </span><span class="cp">{{</span> <span class="nv">SITENAME</span> <span class="cp">}}</span><span class="x">&lt;/h1&gt;</span>
<span class="cp">{%</span>- <span class="k">set</span> <span class="nv">years_month</span> <span class="o">=</span> <span class="o">{}</span> -<span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span>- <span class="k">set</span> <span class="nv">months</span> <span class="o">=</span> <span class="o">{</span><span class="m">1</span><span class="s1">:&#39;Enero&#39;</span><span class="o">,</span> <span class="m">2</span><span class="s1">:&#39;Febrero&#39;</span><span class="o">,</span> <span class="m">3</span><span class="s1">:&#39;Marzo&#39;</span><span class="o">,</span> <span class="m">4</span><span class="s1">:&#39;Abril&#39;</span><span class="o">,</span> <span class="m">5</span><span class="s1">:&#39;Mayo&#39;</span><span class="o">,</span> 
                  <span class="m">6</span><span class="s1">:&#39;Junio&#39;</span><span class="o">,</span> <span class="m">7</span><span class="s1">:&#39;Julio&#39;</span><span class="o">,</span> <span class="m">8</span><span class="s1">:&#39;Agosto&#39;</span><span class="o">,</span> <span class="m">9</span><span class="s1">:&#39;Septiembre&#39;</span><span class="o">,</span> 
                  <span class="m">10</span><span class="s1">:&#39;Octubre&#39;</span><span class="o">,</span> <span class="m">11</span><span class="s1">:&#39;Noviembre&#39;</span><span class="o">,</span> <span class="m">12</span><span class="s1">:&#39;Diciembre&#39;</span><span class="o">}</span> -<span class="cp">%}</span><span class="x"> </span>
<span class="cp">{%</span>- <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">dates</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">article.date.year</span> <span class="k">not</span> <span class="k">in</span> <span class="nv">years_month</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span>- <span class="k">do</span> <span class="nv">years_month.update</span><span class="o">({</span><span class="nv">article.date.year</span><span class="o">:[</span><span class="nv">article.date.month</span><span class="o">]})</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{%</span>- <span class="k">else</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span>- <span class="k">if</span> <span class="nv">article.date.month</span> <span class="k">not</span> <span class="k">in</span> <span class="nv">years_month</span><span class="o">[</span><span class="nv">article.date.year</span><span class="o">]</span> -<span class="cp">%}</span><span class="x"> </span>
<span class="x">      </span><span class="cp">{%</span>- <span class="k">do</span> <span class="nv">years_month</span><span class="o">[</span><span class="nv">article.date.year</span><span class="o">]</span><span class="nv">.append</span><span class="o">(</span><span class="nv">article.date.month</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span>- <span class="k">endif</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{%</span>- <span class="k">endif</span> -<span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">year</span> <span class="k">in</span> <span class="nv">years_month</span><span class="o">|</span><span class="nf">sort</span><span class="o">(</span><span class="nv">reverse</span><span class="o">=</span><span class="kp">True</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">  &lt;h2 class=&quot;year&quot;&gt;</span><span class="cp">{{</span> <span class="nv">year</span> <span class="cp">}}</span><span class="x">&lt;/h2&gt;&lt;dl&gt;  </span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">month</span> <span class="k">in</span> <span class="nv">years_month</span><span class="o">[</span><span class="nv">year</span><span class="o">]</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;dt class=&quot;month&quot;&gt;</span><span class="cp">{{</span> <span class="nv">months</span><span class="o">[</span><span class="nv">month</span><span class="o">]</span> <span class="cp">}}</span><span class="x">&lt;/dt&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">dates</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">      </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">article.date.year</span> <span class="o">==</span> <span class="nv">year</span> <span class="k">and</span> <span class="nv">article.date.month</span> <span class="o">==</span> <span class="nv">month</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;dd&gt;&lt;span class=&quot;day&quot;&gt;</span><span class="cp">{{</span> <span class="nv">article.locale_date.split</span><span class="o">()[</span><span class="m">1</span><span class="o">]</span> <span class="cp">}}</span><span class="x">&lt;/span&gt;  &lt;a href=&#39;</span><span class="cp">{{</span> <span class="nv">article.url</span> <span class="cp">}}</span><span class="x">&#39;&gt;</span><span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="x">&lt;/a&gt;&lt;/dd&gt;</span>
<span class="x">      </span><span class="cp">{%</span>- <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x">&lt;/dl&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/section&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>


<p>Donde los artículos están archivados por año, mes y día, con un formato que 
personalmente me agrada bastante más.</p>
<p>El repositorio de este blog se puede encontrar en <a href="http://github.com/joedicastro/joedicastro.com">github</a>.</p>
  </div><!-- /.entry-content -->
  <p class="tagged">Etiquetado como: <a href="./tag/pelican.html">pelican</a>, <a href="./tag/python.html">python</a>, <a href="./tag/markdown.html">markdown</a>, <a href="./tag/restructuredtext.html">restructuredtext</a>, <a href="./tag/blog.html">blog</a>, <a href="./tag/mercurial.html">mercurial</a>, <a href="./tag/hg.html">hg</a>.</p>

  
</article>
</section>
<footer id="contentinfo" class="body">
    <address id="about" class="vcard body">
      © 2010-2015 joe di castro - <a
          href="mailto:joe@joedicastro.com">correo</a>|<a
          href="http://twitter.com/joe_di_castro">twitter</a>|<a
          href="https://github.com/joedicastro">github</a> <span id="license">El contenido está bajo <a href="http://creativecommons.org/licenses/by-sa/3.0/es">licencia Creative Commons</a></span>
    </address><!-- /#about -->
  </footer><!-- /#contentinfo -->


</body>
</html>